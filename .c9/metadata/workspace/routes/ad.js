{"filter":false,"title":"ad.js","tooltip":"/routes/ad.js","undoManager":{"mark":14,"position":14,"stack":[[{"start":{"row":0,"column":0},"end":{"row":64,"column":0},"action":"insert","lines":["var express = require('express');","var router = express.Router();","var restrict = require('../auth/restrict');","var adService = require('../services/ad-service');","/* GET List  page. */","router.get('/', function(req, res, next) {","    if(!req.isAuthenticated())","    {","        ","        return res.redirect('/');","    }","   ","    var vm= {","        ","        title:' Post Your ad',","        //firstname: 'Bharat'","        firstname: req.user ? req.user.firstname : null","    };","  res.render('./', vm);","  ","  //return res.redirect('/');","    ","});","","/* GET user registration page */","router.get('/', function(req, res, next) {","  var vm = {","    title: 'Post your ad',","     firstname: req.user ? req.user.firstname : null","  };","  res.render('lists/index', vm);","});","","","/* GET user login page */","router.post('/', function(req, res, next) {"," adService.addAd(req.body, function (err) {"," if(err) {    ","  var vm = {","    title: 'Added',","    error: err","  };","  return res.render('lists/index', vm);","  //res.send('I should get smethinm');","  }","    //res.send('I am here');","      res.redirect ('lists/thank'); ","});","});","","","","","/* GET user registration page */","router.get('/thank', function(req, res, next) {","  var vm = {","    title: 'Thank you for your ad',","     firstname: req.user ? req.user.firstname : null","  };","  res.render('lists/thank', vm);","});","","","module.exports = router;",""],"id":1}],[{"start":{"row":4,"column":0},"end":{"row":22,"column":3},"action":"remove","lines":["/* GET List  page. */","router.get('/', function(req, res, next) {","    if(!req.isAuthenticated())","    {","        ","        return res.redirect('/');","    }","   ","    var vm= {","        ","        title:' Post Your ad',","        //firstname: 'Bharat'","        firstname: req.user ? req.user.firstname : null","    };","  res.render('./', vm);","  ","  //return res.redirect('/');","    ","});"],"id":2}],[{"start":{"row":5,"column":0},"end":{"row":14,"column":0},"action":"remove","lines":["","/* GET user registration page */","router.get('/', function(req, res, next) {","  var vm = {","    title: 'Post your ad',","     firstname: req.user ? req.user.firstname : null","  };","  res.render('lists/index', vm);","});",""],"id":3}],[{"start":{"row":6,"column":0},"end":{"row":22,"column":0},"action":"remove","lines":["","/* GET user login page */","router.post('/', function(req, res, next) {"," adService.addAd(req.body, function (err) {"," if(err) {    ","  var vm = {","    title: 'Added',","    error: err","  };","  return res.render('lists/index', vm);","  //res.send('I should get smethinm');","  }","    //res.send('I am here');","      res.redirect ('lists/thank'); ","});","});",""],"id":4}],[{"start":{"row":7,"column":0},"end":{"row":8,"column":0},"action":"remove","lines":["",""],"id":5}],[{"start":{"row":6,"column":0},"end":{"row":7,"column":0},"action":"remove","lines":["",""],"id":6}],[{"start":{"row":5,"column":0},"end":{"row":6,"column":0},"action":"remove","lines":["",""],"id":7}],[{"start":{"row":5,"column":0},"end":{"row":6,"column":0},"action":"remove","lines":["",""],"id":8}],[{"start":{"row":5,"column":0},"end":{"row":17,"column":0},"action":"remove","lines":["","/* GET user registration page */","router.get('/thank', function(req, res, next) {","  var vm = {","    title: 'Thank you for your ad',","     firstname: req.user ? req.user.firstname : null","  };","  res.render('lists/thank', vm);","});","","","module.exports = router;",""],"id":9}],[{"start":{"row":5,"column":0},"end":{"row":13,"column":0},"action":"insert","lines":["/* GET user registration page */","router.get('/', function(req, res, next) {","  var vm = {","    title: 'Post your ad',","     firstname: req.user ? req.user.firstname : null","  };","  res.render('lists/index', vm);","});",""],"id":10}],[{"start":{"row":11,"column":14},"end":{"row":11,"column":19},"action":"remove","lines":["lists"],"id":11},{"start":{"row":11,"column":14},"end":{"row":11,"column":15},"action":"insert","lines":["a"]}],[{"start":{"row":11,"column":15},"end":{"row":11,"column":16},"action":"insert","lines":["d"],"id":12}],[{"start":{"row":13,"column":0},"end":{"row":14,"column":0},"action":"insert","lines":["",""],"id":13}],[{"start":{"row":14,"column":0},"end":{"row":15,"column":0},"action":"insert","lines":["",""],"id":14}],[{"start":{"row":15,"column":0},"end":{"row":20,"column":0},"action":"insert","lines":["router.get('/ad', function(req, res, next) {","  adService.getAd(function(next,ad) {","    res.json(ad);","  });","});",""],"id":15}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":20,"column":0},"end":{"row":20,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1445249264735,"hash":"f5e1ca678f2e00d792497edcc58d988b549813fd"}